"use strict";(self.webpackChunkchurch=self.webpackChunkchurch||[]).push([[640],{9548:(A,c,i)=>{i.r(c),i.d(c,{VideosPageModule:()=>L});var a=i(8583),h=i(9029),f=i(4633),d=i(3971),u=i(5987),g=i(8307),p=i(5435),m=i(8002),v=i(157),e=i(7716),y=i(425),C=i(2582);function M(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",5),e.NdJ("scrolled",function(){return e.CHM(n),e.oxw(2).fetchVideos()}),e._UZ(1,"nguix-videos",6),e.qZA()}if(2&t){const n=s.ngIf;e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",50),e.xp6(1),e.Q6J("i18n",!0)("videos",n)}}function x(t,s){1&t&&(e.TgZ(0,"div",7),e._UZ(1,"nguix-spinner"),e.qZA())}function V(t,s){if(1&t&&(e.TgZ(0,"div",2),e.YNc(1,M,2,4,"div",3),e.ALo(2,"async"),e.YNc(3,x,2,0,"div",4),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,n.videos$)),e.xp6(2),e.Q6J("ngIf",n.isLoadingMore)}}function I(t,s){1&t&&(e.TgZ(0,"div",8),e._UZ(1,"nguix-skeleton-videos",9),e.qZA()),2&t&&(e.xp6(1),e.Q6J("no",5))}const T=[{path:"",component:(()=>{class t{constructor(n,l){this.store=n,this.settingService=l,this.page$=this.settingService.onLocaleChanged.pipe((0,g.b)(o=>(this.locale=o,this.fetchVideos()))),this.videos$=this.store.select(o=>o.schemata_video).pipe((0,p.h)(o=>!!Object.keys(o.queryList).length),(0,g.b)(o=>{const r=o.queryList[this.latestQueryId];this.areThereMore=!!r.length,this.latestItem=this.areThereMore?r[r.length-1]:this.latestItem,this.isLoadingMore=!1}),(0,m.U)(o=>Object.keys(o.queryList).filter(r=>r.includes(`:${this.locale}:`)).reduce((r,Z)=>r.concat(o.queryList[Z]),[]))),this.pageNo=1,this.areThereMore=!0,this.isLoadingMore=!1}ngOnInit(){}fetchVideos(){!this.areThereMore||(this.isLoadingMore=!0,setTimeout(()=>this.isLoadingMore=!1,3e3),this.latestQueryId=`video:default:publish:${this.locale}:${this.pageNo++}`,this.store.dispatch(new v.lz(this.latestQueryId,n=>{let l=n.where("type","==","default").where("status","==","publish").where("locale","==",this.locale).orderBy("createdAt","desc");return this.latestItem&&(l=l.startAfter(this.latestItem.createdAt)),l.limit(3)})))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(y.yh),e.Y36(C.RC))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-videos"]],decls:4,vars:4,consts:[["class","host",4,"ngIf","ngIfElse"],["loadingHost",""],[1,"host"],["class","listing","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled",4,"ngIf"],["class","infinite-loading",4,"ngIf"],["infiniteScroll","",1,"listing",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["layout","card",3,"i18n","videos"],[1,"infinite-loading"],[1,"loading-host"],["layout","card",3,"no"]],template:function(n,l){if(1&n&&(e.YNc(0,V,4,4,"div",0),e.ALo(1,"async"),e.YNc(2,I,2,1,"ng-template",null,1,e.W1O)),2&n){const o=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,l.page$))("ngIfElse",o)}},directives:[a.O5,h.R,d.VideosComponent,d.SpinnerComponent,d.SkeletonVideosComponent],pipes:[a.Ov],styles:[".host[_ngcontent-%COMP%]{padding:1rem}.host[_ngcontent-%COMP%]   .infinite-loading[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-host[_ngcontent-%COMP%]{padding:1rem}"]}),t})()}];let S=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.Bz.forChild(T)],u.Bz]}),t})(),L=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez,h.X,f.Lr,d.NguixSpinnerComponentModule,d.NguixVideosI18nComponentModule,d.NguixSkeletonVideosComponentModule,S]]}),t})()}}]);