"use strict";(self.webpackChunkchurch=self.webpackChunkchurch||[]).push([[640],{9548:(N,a,i)=>{i.r(a),i.d(a,{VideosPageModule:()=>A});var c=i(8583),h=i(9029),f=i(4633),d=i(3971),g=i(5987),u=i(8307),p=i(5435),m=i(8002),v=i(157),e=i(7716),y=i(425),C=i(2582);function x(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"div",6),e.NdJ("scrolled",function(){return e.CHM(n),e.oxw(2).fetchVideos()}),e._UZ(1,"nguix-videos",7),e.qZA()}if(2&t){const n=s.ngIf;e.Q6J("infiniteScrollDistance",2)("infiniteScrollThrottle",50),e.xp6(1),e.Q6J("i18n",!0)("videos",n)}}function M(t,s){1&t&&(e.TgZ(0,"div",8),e._UZ(1,"nguix-spinner"),e.qZA())}function V(t,s){if(1&t&&(e.TgZ(0,"div",3),e.YNc(1,x,2,4,"div",4),e.ALo(2,"async"),e.YNc(3,M,2,0,"div",5),e.qZA()),2&t){const n=e.oxw(),l=e.MAs(3);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,n.videos$))("ngIfElse",l),e.xp6(2),e.Q6J("ngIf",n.isLoadingMore)}}function I(t,s){1&t&&e._UZ(0,"nguix-skeleton-videos")}function T(t,s){1&t&&(e.TgZ(0,"div",9),e._UZ(1,"nguix-spinner"),e.qZA())}const S=[{path:"",component:(()=>{class t{constructor(n,l){this.store=n,this.settingService=l,this.page$=this.settingService.onLocaleChanged.pipe((0,u.b)(o=>(this.locale=o,this.fetchVideos()))),this.videos$=this.store.select(o=>o.schemata_video).pipe((0,p.h)(o=>!!Object.keys(o.queryList).length),(0,u.b)(o=>{const r=o.queryList[this.latestQueryId];this.areThereMore=!!r.length,this.latestItem=this.areThereMore?r[r.length-1]:this.latestItem,this.isLoadingMore=!1}),(0,m.U)(o=>Object.keys(o.queryList).filter(r=>r.includes(`:${this.locale}:`)).reduce((r,L)=>r.concat(o.queryList[L]),[]))),this.pageNo=1,this.areThereMore=!0,this.isLoadingMore=!1}ngOnInit(){}fetchVideos(){!this.areThereMore||(this.isLoadingMore=!0,setTimeout(()=>this.isLoadingMore=!1,3e3),this.latestQueryId=`video:default:publish:${this.locale}:${this.pageNo++}`,this.store.dispatch(new v.lz(this.latestQueryId,n=>{let l=n.where("type","==","default").where("status","==","publish").where("locale","==",this.locale).orderBy("createdAt","desc");return this.latestItem&&(l=l.startAfter(this.latestItem.createdAt)),l.limit(3)})))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(y.yh),e.Y36(C.RC))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-videos"]],decls:6,vars:4,consts:[["class","host",4,"ngIf","ngIfElse"],["listingSkeleton",""],["loadingHost",""],[1,"host"],["class","listing","infiniteScroll","",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled",4,"ngIf","ngIfElse"],["class","infinite-loading",4,"ngIf"],["infiniteScroll","",1,"listing",3,"infiniteScrollDistance","infiniteScrollThrottle","scrolled"],["layout","card",3,"i18n","videos"],[1,"infinite-loading"],[1,"loading-host"]],template:function(n,l){if(1&n&&(e.YNc(0,V,4,5,"div",0),e.ALo(1,"async"),e.YNc(2,I,1,0,"ng-template",null,1,e.W1O),e.YNc(4,T,2,0,"ng-template",null,2,e.W1O)),2&n){const o=e.MAs(5);e.Q6J("ngIf",e.lcZ(1,2,l.page$))("ngIfElse",o)}},directives:[c.O5,h.R,d.VideosComponent,d.SpinnerComponent,d.SkeletonVideosComponent],pipes:[c.Ov],styles:[".host[_ngcontent-%COMP%]{padding:1rem}.host[_ngcontent-%COMP%]   .infinite-loading[_ngcontent-%COMP%]{display:flex;justify-content:center}.loading-host[_ngcontent-%COMP%]{padding:2rem;display:flex;justify-content:center}"]}),t})()}];let Z=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.Bz.forChild(S)],g.Bz]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,h.X,f.Lr,d.NguixSpinnerComponentModule,d.NguixVideosI18nComponentModule,d.NguixSkeletonVideosComponentModule,Z]]}),t})()}}]);